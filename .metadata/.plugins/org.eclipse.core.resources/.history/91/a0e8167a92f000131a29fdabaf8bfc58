#include "include/graph_struct.h"
#include "include/grid_mrf.h"

#include <opencv2/core/core.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/highgui/highgui.hpp>

#include <iostream>
using namespace std;
using namespace cv;

int main(int argc, char **argv)
{
	if (argc < 3)
	{
		cout << "Parameters too few." << endl;
		return 1;
	}

	Mat left_img = imread(string(argv[1]), CV_LOAD_IMAGE_GRAYSCALE);
	Mat right_img = imread(string(argv[2]), CV_LOAD_IMAGE_GRAYSCALE);

    grid_mrf mrf(4, 5);
    mrf.draw_graph();

    mrf.inference(0, true);
	return 0;
}
